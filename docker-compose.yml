version: '3.7'
services:
  caster:
    build: 
      dockerfile: Dockerfile
      args:
        DOMAIN: phonk.live
        OGG_STREAM_ENDPOINT: /stream
        MPEG_STREAM_ENDPOINT: /backup_stream
        SOCKET_IO_PROTOCOL: wss # WSS,WS,HTTPS,HTTP
        WEB_PROTOCOL: https
        PORT: 4000
        ICECAST_PASSWORD: password #As long as you dont forward port 8000 this does not need to be secure as its not exposed
    container_name: caster
    restart: always
    ports:
      - 4000:4000
    volumes:
      - ./casting/playlist.txt:/etc/ices2/playlist.txt
      - ./casting/songs:/etc/ices2/songs